!function(){"use strict";var e=document.querySelectorAll("[data-letter]"),t=document.querySelector("[data-backspace]"),n=document.querySelector("[data-capslock]"),c=document.querySelector("[data-enter]"),i=document.querySelector("[data-done]"),a=document.querySelector("[data-space]"),o=document.querySelector("[data-output]"),d=document.querySelector("[data-keyboard]"),s=document.querySelector("[data-language]"),r=document.querySelector("[data-shift]"),u=!0,l=!1,v=!1,f=["1","2","3","4","5","6","7","8","9","0","-","=","q","w","e","r","t","y","u","i","o","p","[","]","a","s","d","f","g","h","j","k","l",";","'","\\","z","x","c","v","b","n","m",",",".","/"],k=["!","@","#","$","%","^","&","*","(",")","_","+","Q","W","E","R","T","Y","U","I","O","P","{","}","A","S","D","F","G","H","J","K","L",":",'"',"|","Z","X","C","V","B","N","M","<",">","?"],L=["!","@","#","$","%","^","&","*","(",")","_","+","q","w","e","r","t","y","u","i","o","p","{","}","a","s","d","f","g","h","j","k","l",":",'"',"|","z","x","c","v","b","n","m","<",">","?"],p=["1","2","3","4","5","6","7","8","9","0","-","=","Q","W","E","R","T","Y","U","I","O","P","[","]","A","S","D","F","G","H","J","K","L",";","'","\\","Z","X","C","V","B","N","M",",",".","/"],m=["1","2","3","4","5","6","7","8","9","0","-","=","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","ф","ы","в","а","п","р","о","л","д","ж","э","\\","я","ч","с","м","и","т","ь","б","ю","."],y=["!",'"',"№",";","%",":","?","*","(",")","_","+","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","/","Я","Ч","С","М","И","Т","Ь","Б","Ю",","],E=["!",'"',"№",";","%",":","?","*","(",")","_","+","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","ф","ы","в","а","п","р","о","л","д","ж","э","/","я","ч","с","м","и","т","ь","б","ю",","],S=["1","2","3","4","5","6","7","8","9","0","-","=","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","\\","Я","Ч","С","М","И","Т","Ь","Б","Ю","."],_=document.querySelector("[data-left]"),h=document.querySelector("[data-right]");_.addEventListener("click",(function(){o.selectionStart=o.selectionStart-1,o.selectionEnd=o.selectionStart,o.focus()})),h.addEventListener("click",(function(){o.selectionStart=o.selectionStart+1,o.selectionEnd=o.selectionStart,o.focus()})),console.dir(o);var g=document.querySelector("[data-audio]"),b={},q=!0;function w(e){q&&("pause"in b&&b.pause(),(b=new Audio(e)).play())}g.addEventListener("click",(function(){q?(q=!1,g.classList.remove("keyboard__key--active")):(q=!0,g.classList.add("keyboard__key--active"))}));var x=document.querySelector("[data-speech]"),C=document.querySelector("[data-speech-helper]");!function(){if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){var e=!1;window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;var t=new SpeechRecognition;t.interimResults=!0,t.lang="en",s.addEventListener("click",(function(){t.lang=u?"ru":"en"})),t.addEventListener("result",(function(e){var n=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");C.innerHTML="".concat(n,", язык распознавания: ").concat(t.lang),e.results[0].isFinal&&(o.value+=n,o.value+="\n")})),t.addEventListener("end",(function(){!0===e&&t.start()})),x.addEventListener("click",(function(){!1===e?(e=!0,t.start(),x.classList.add("keyboard__key--active")):(e=!1,console.log(e),x.classList.remove("keyboard__key--active"),t.stop())}))}else C.innerHTML="Браузер не поддерживает функцию распознавания речи"}();var R=function(t,n,c){for(var i=0;i<e.length;i++)!0===t&&!1===n&&!1===c?e[i].textContent=f[i]:!0===t&&!1===n&&!0===c?e[i].textContent=k[i]:!0===t&&!0===n&&!0===c?e[i].textContent=L[i]:!0===t&&!0===n&&!1===c?e[i].textContent=p[i]:!1===t&&!1===n&&!1===c?e[i].textContent=m[i]:!1===t&&!1===n&&!0===c?e[i].textContent=y[i]:!1===t&&!0===n&&!0===c?e[i].textContent=E[i]:!1===t&&!0===n&&!1===c&&(e[i].textContent=S[i])};s.addEventListener("click",(function(){u?(R(u=!1,l,v),s.textContent="RU"):(R(u=!0,l,v),s.textContent="EN")})),n.addEventListener("click",(function(){!0===l?(R(u,l=!1,v),n.classList.remove("keyboard__key--active")):(R(u,l=!0,v),n.classList.add("keyboard__key--active"))})),r.addEventListener("click",(function(){!0===v?(R(u,l,v=!1),r.classList.remove("keyboard__key--active")):(R(u,l,v=!0),r.classList.add("keyboard__key--active"))})),function(){for(var t=function(t){e[t].addEventListener("click",(function(){o.value+=e[t].textContent,o.focus()}))},n=0;n<e.length;n++)t(n)}(),t.addEventListener("click",(function(){o.value=o.value.slice(0,-1),o.focus()})),c.addEventListener("click",(function(){o.value+="\n",o.focus()})),a.addEventListener("click",(function(){o.value+=" ",o.focus()})),o.addEventListener("click",(function(){d.classList.remove("keyboard--hidden")})),i.addEventListener("click",(function(){d.classList.add("keyboard--hidden")}));for(var A=0;A<e.length;A++)e[A].addEventListener("click",(function(){w("./static/sound/a.mp3")}));s.addEventListener("click",(function(){w("./static/sound/a.mp3")})),t.addEventListener("click",(function(){w("./static/sound/backspace.mp3")})),x.addEventListener("click",(function(){w("./static/sound/a.mp3")})),g.addEventListener("click",(function(){w("./static/sound/a.mp3")})),n.addEventListener("click",(function(){w("./static/sound/caps.mp3")})),c.addEventListener("click",(function(){w("./static/sound/enter.mp3")})),r.addEventListener("click",(function(){w("./static/sound/shift.mp3")})),i.addEventListener("click",(function(){w("./static/sound/a.mp3")})),a.addEventListener("click",(function(){w("./static/sound/space.mp3")})),_.addEventListener("click",(function(){w("./static/sound/space.mp3")})),h.addEventListener("click",(function(){w("./static/sound/space.mp3")}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHAta2V5Ym9hcmQvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsibGV0dGVyQnRucyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImJhY2tzcGFjZUJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJjYXBzbG9ja0J0biIsImVudGVyQnRuIiwiZG9uZUJ0biIsInNwYWNlQnRuIiwib3V0UHV0Iiwia2V5Qm9hcmQiLCJsYW5ndWFnZUJ0biIsInNoaWZ0QnRuIiwibGFuZ3VhZ2VFbiIsImNhcHNMb2NrIiwic2hpZnQiLCJlbmdsaXNoTGV0dGVycyIsImVuZ2xpc2hMZXR0ZXJzU2hpZnQiLCJlbmdsaXNoTGV0dGVyc1NoaWZ0Q2Fwc2xvY2siLCJlbmdsaXNoTGV0dGVyc0NhcHNsb2NrIiwicnVzc2lhbkxldHRlcnMiLCJydXNzaWFuTGV0dGVyc1NoaWZ0IiwicnVzc2lhbkxldHRlcnNTaGlmdENhcHNsb2NrIiwicnVzc2lhbkxldHRlcnNDYXBzbG9jayIsImxlZnRCdG4iLCJyaWdodEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsImZvY3VzIiwiY29uc29sZSIsImRpciIsImF1ZGlvQnRuIiwiYXVkaW8iLCJhdWRpb09uIiwicGxheVNvdW5kIiwidXJsIiwicGF1c2UiLCJBdWRpbyIsInBsYXkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzcGVlY2hCdG4iLCJzcGVlY2hIZWxwZXIiLCJ3aW5kb3ciLCJzcGVlY2giLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwic3BlZWNoT2JqZWN0IiwiaW50ZXJpbVJlc3VsdHMiLCJsYW5nIiwiZSIsInRleHQiLCJBcnJheSIsImZyb20iLCJyZXN1bHRzIiwibWFwIiwicmVzdWx0IiwidHJhbnNjcmlwdCIsImpvaW4iLCJpbm5lckhUTUwiLCJpc0ZpbmFsIiwidmFsdWUiLCJzdGFydCIsImxvZyIsInN0b3AiLCJzcGVlY2hGdW5jdGlvbiIsImxldHRlckNoYW5nZSIsImkiLCJsZW5ndGgiLCJ0ZXh0Q29udGVudCIsInB1c2hMZXR0ZXIiLCJzbGljZSJdLCJtYXBwaW5ncyI6InlCQUVBLElBQU1BLEVBQWFDLFNBQVNDLGlCQUFpQixpQkFDdkNDLEVBQWVGLFNBQVNHLGNBQWMsb0JBQ3RDQyxFQUFjSixTQUFTRyxjQUFjLG1CQUNyQ0UsRUFBV0wsU0FBU0csY0FBYyxnQkFDbENHLEVBQVVOLFNBQVNHLGNBQWMsZUFDakNJLEVBQVdQLFNBQVNHLGNBQWMsZ0JBQ2xDSyxFQUFTUixTQUFTRyxjQUFjLGlCQUNoQ00sRUFBV1QsU0FBU0csY0FBYyxtQkFDbENPLEVBQWNWLFNBQVNHLGNBQWMsbUJBQ3JDUSxFQUFXWCxTQUFTRyxjQUFjLGdCQUVwQ1MsR0FBYSxFQUNiQyxHQUFXLEVBQ1hDLEdBQVEsRUFFUkMsRUFBaUIsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDN0UsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQ3ZELElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBTSxLQUN4RCxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6Q0MsRUFBc0IsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDbEYsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQ3ZELElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUN2RCxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6Q0MsRUFBOEIsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDMUYsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQ3ZELElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUN2RCxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6Q0MsRUFBeUIsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDckYsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQ3ZELElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBTSxLQUN4RCxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6Q0MsRUFBaUIsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDN0UsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQ3ZELElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDbEQsS0FBTSxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUMvQ0MsRUFBc0IsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFDbEYsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQ3ZELElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFL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bUNBRWRRLEVBQVVqQixpQkFBaUIsU0FBUyxXQUNoQ1MsRUFBVSwyQkFFZEgsRUFBU04saUJBQWlCLFNBQVMsV0FDL0JTLEVBQVUsMkJBRWQ5QixFQUFZcUIsaUJBQWlCLFNBQVMsV0FDbENTLEVBQVUsOEJBRWQ3QixFQUFTb0IsaUJBQWlCLFNBQVMsV0FDL0JTLEVBQVUsK0JBRWR2QixFQUFTYyxpQkFBaUIsU0FBUyxXQUMvQlMsRUFBVSwrQkFFZDVCLEVBQVFtQixpQkFBaUIsU0FBUyxXQUM5QlMsRUFBVSwyQkFFZDNCLEVBQVNrQixpQkFBaUIsU0FBUyxXQUMvQlMsRUFBVSwrQkFFZFgsRUFBUUUsaUJBQWlCLFNBQVMsV0FDOUJTLEVBQVUsK0JBRWRWLEVBQVNDLGlCQUFpQixTQUFTLFdBQy9CUyxFQUFVLCtCIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4vc3R5bGUuc2Nzc1wiO1xyXG5cclxuY29uc3QgbGV0dGVyQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxldHRlcl0nKTtcclxuY29uc3QgYmFja3NwYWNlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYmFja3NwYWNlXScpO1xyXG5jb25zdCBjYXBzbG9ja0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNhcHNsb2NrXScpO1xyXG5jb25zdCBlbnRlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWVudGVyXScpO1xyXG5jb25zdCBkb25lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZG9uZV0nKTtcclxuY29uc3Qgc3BhY2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zcGFjZV0nKTtcclxuY29uc3Qgb3V0UHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtb3V0cHV0XScpO1xyXG5jb25zdCBrZXlCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWtleWJvYXJkXScpO1xyXG5jb25zdCBsYW5ndWFnZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxhbmd1YWdlXScpO1xyXG5jb25zdCBzaGlmdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNoaWZ0XScpO1xyXG5cclxubGV0IGxhbmd1YWdlRW4gPSB0cnVlO1xyXG5sZXQgY2Fwc0xvY2sgPSBmYWxzZTtcclxubGV0IHNoaWZ0ID0gZmFsc2U7XHJcblxyXG5sZXQgZW5nbGlzaExldHRlcnMgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgXHJcbidxJywgJ3cnLCAnZScsICdyJywgJ3QnLCAneScsICd1JywgJ2knLCAnbycsICdwJywgJ1snLCAnXScsIFxyXG4nYScsICdzJywgJ2QnLCAnZicsICdnJywgJ2gnLCAnaicsICdrJywgJ2wnLCAnOycsICdcXCcnLCAnXFxcXCcsIFxyXG4neicsICd4JywgJ2MnLCAndicsICdiJywgJ24nLCAnbScsICcsJywgJy4nLCAnLyddO1xyXG5sZXQgZW5nbGlzaExldHRlcnNTaGlmdCA9IFsnIScsICdAJywgJyMnLCAnJCcsICclJywgJ14nLCAnJicsICcqJywgJygnLCAnKScsICdfJywgJysnLCBcclxuJ1EnLCAnVycsICdFJywgJ1InLCAnVCcsICdZJywgJ1UnLCAnSScsICdPJywgJ1AnLCAneycsICd9JywgXHJcbidBJywgJ1MnLCAnRCcsICdGJywgJ0cnLCAnSCcsICdKJywgJ0snLCAnTCcsICc6JywgJ1wiJywgJ3wnLCBcclxuJ1onLCAnWCcsICdDJywgJ1YnLCAnQicsICdOJywgJ00nLCAnPCcsICc+JywgJz8nXTtcclxubGV0IGVuZ2xpc2hMZXR0ZXJzU2hpZnRDYXBzbG9jayA9IFsnIScsICdAJywgJyMnLCAnJCcsICclJywgJ14nLCAnJicsICcqJywgJygnLCAnKScsICdfJywgJysnLCBcclxuJ3EnLCAndycsICdlJywgJ3InLCAndCcsICd5JywgJ3UnLCAnaScsICdvJywgJ3AnLCAneycsICd9JywgXHJcbidhJywgJ3MnLCAnZCcsICdmJywgJ2cnLCAnaCcsICdqJywgJ2snLCAnbCcsICc6JywgJ1wiJywgJ3wnLCBcclxuJ3onLCAneCcsICdjJywgJ3YnLCAnYicsICduJywgJ20nLCAnPCcsICc+JywgJz8nXTtcclxubGV0IGVuZ2xpc2hMZXR0ZXJzQ2Fwc2xvY2sgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgXHJcbidRJywgJ1cnLCAnRScsICdSJywgJ1QnLCAnWScsICdVJywgJ0knLCAnTycsICdQJywgJ1snLCAnXScsIFxyXG4nQScsICdTJywgJ0QnLCAnRicsICdHJywgJ0gnLCAnSicsICdLJywgJ0wnLCAnOycsICdcXCcnLCAnXFxcXCcsIFxyXG4nWicsICdYJywgJ0MnLCAnVicsICdCJywgJ04nLCAnTScsICcsJywgJy4nLCAnLyddO1xyXG5sZXQgcnVzc2lhbkxldHRlcnMgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JyxcclxuJ9C5JywgJ9GGJywgJ9GDJywgJ9C6JywgJ9C1JywgJ9C9JywgJ9CzJywgJ9GIJywgJ9GJJywgJ9C3JywgJ9GFJywgJ9GKJyxcclxuJ9GEJywgJ9GLJywgJ9CyJywgJ9CwJywgJ9C/JywgJ9GAJywgJ9C+JywgJ9C7JywgJ9C0JywgJ9C2JywgJ9GNJywgXHJcbidcXFxcJywgJ9GPJywgJ9GHJywgJ9GBJywgJ9C8JywgJ9C4JywgJ9GCJywgJ9GMJywgJ9CxJywgJ9GOJywgJy4nXTtcclxubGV0IHJ1c3NpYW5MZXR0ZXJzU2hpZnQgPSBbJyEnLCAnXCInLCAn4oSWJywgJzsnLCAnJScsICc6JywgJz8nLCAnKicsICcoJywgJyknLCAnXycsICcrJyxcclxuJ9CZJywgJ9CmJywgJ9CjJywgJ9CaJywgJ9CVJywgJ9CdJywgJ9CTJywgJ9CoJywgJ9CpJywgJ9CXJywgJ9ClJywgJ9CqJyxcclxuJ9CkJywgJ9CrJywgJ9CSJywgJ9CQJywgJ9CfJywgJ9CgJywgJ9CeJywgJ9CbJywgJ9CUJywgJ9CWJywgJ9CtJywgJy8nLCBcclxuJ9CvJywgJ9CnJywgJ9ChJywgJ9CcJywgJ9CYJywgJ9CiJywgJ9CsJywgJ9CRJywgJ9CuJywgJywnXTtcclxubGV0IHJ1c3NpYW5MZXR0ZXJzU2hpZnRDYXBzbG9jayA9IFsnIScsICdcIicsICfihJYnLCAnOycsICclJywgJzonLCAnPycsICcqJywgJygnLCAnKScsICdfJywgJysnLFxyXG4n0LknLCAn0YYnLCAn0YMnLCAn0LonLCAn0LUnLCAn0L0nLCAn0LMnLCAn0YgnLCAn0YknLCAn0LcnLCAn0YUnLCAn0YonLFxyXG4n0YQnLCAn0YsnLCAn0LInLCAn0LAnLCAn0L8nLCAn0YAnLCAn0L4nLCAn0LsnLCAn0LQnLCAn0LYnLCAn0Y0nLCAnLycsIFxyXG4n0Y8nLCAn0YcnLCAn0YEnLCAn0LwnLCAn0LgnLCAn0YInLCAn0YwnLCAn0LEnLCAn0Y4nLCAnLCddO1xyXG5sZXQgcnVzc2lhbkxldHRlcnNDYXBzbG9jayA9IFsnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLFxyXG4n0JknLCAn0KYnLCAn0KMnLCAn0JonLCAn0JUnLCAn0J0nLCAn0JMnLCAn0KgnLCAn0KknLCAn0JcnLCAn0KUnLCAn0KonLFxyXG4n0KQnLCAn0KsnLCAn0JInLCAn0JAnLCAn0J8nLCAn0KAnLCAn0J4nLCAn0JsnLCAn0JQnLCAn0JYnLCAn0K0nLCAnXFxcXCcsIFxyXG4n0K8nLCAn0KcnLCAn0KEnLCAn0JwnLCAn0JgnLCAn0KInLCAn0KwnLCAn0JEnLCAn0K4nLCAnLiddO1xyXG5cclxuY29uc3QgbGVmdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxlZnRdJyk7XHJcbmNvbnN0IHJpZ2h0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcmlnaHRdJyk7XHJcbmxldCBjdXJzb3JGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgIGxlZnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgb3V0UHV0LnNlbGVjdGlvblN0YXJ0ID0gb3V0UHV0LnNlbGVjdGlvblN0YXJ0IC0gMTtcclxuICAgICAgICBvdXRQdXQuc2VsZWN0aW9uRW5kID0gb3V0UHV0LnNlbGVjdGlvblN0YXJ0O1xyXG4gICAgICAgIG91dFB1dC5mb2N1cygpO1xyXG4gICAgfSk7XHJcbiAgICByaWdodEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBvdXRQdXQuc2VsZWN0aW9uU3RhcnQgPSBvdXRQdXQuc2VsZWN0aW9uU3RhcnQgKyAxO1xyXG4gICAgICAgIG91dFB1dC5zZWxlY3Rpb25FbmQgPSBvdXRQdXQuc2VsZWN0aW9uU3RhcnQ7XHJcbiAgICAgICAgb3V0UHV0LmZvY3VzKCk7XHJcbiAgICB9KTtcclxufVxyXG5jdXJzb3JGdW5jdGlvbigpO1xyXG5jb25zb2xlLmRpcihvdXRQdXQpO1xyXG5cclxuY29uc3QgYXVkaW9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hdWRpb10nKTtcclxubGV0IGF1ZGlvID0ge307XHJcbmxldCBhdWRpb09uID0gdHJ1ZTtcclxuYXVkaW9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IFxyXG4gICAgaWYgKGF1ZGlvT24pIHtcclxuICAgICAgICBhdWRpb09uID0gZmFsc2U7XHJcbiAgICAgICAgYXVkaW9CdG4uY2xhc3NMaXN0LnJlbW92ZSgna2V5Ym9hcmRfX2tleS0tYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF1ZGlvT24gPSB0cnVlO1xyXG4gICAgICAgIGF1ZGlvQnRuLmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkX19rZXktLWFjdGl2ZScpO1xyXG4gICAgfVxyXG59KTtcclxuZnVuY3Rpb24gcGxheVNvdW5kKHVybCkge1xyXG4gICAgaWYgKGF1ZGlvT24pIHtcclxuICAgICAgICBpZihcInBhdXNlXCIgaW4gYXVkaW8pIHtcclxuICAgICAgICAgICAgYXVkaW8ucGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXVkaW8gPSBuZXcgQXVkaW8odXJsKTtcclxuICAgICAgICBhdWRpby5wbGF5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHNwZWVjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNwZWVjaF0nKTtcclxuY29uc3Qgc3BlZWNoSGVscGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc3BlZWNoLWhlbHBlcl0nKTtcclxubGV0IHNwZWVjaEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgaWYgKCdTcGVlY2hSZWNvZ25pdGlvbicgaW4gd2luZG93IHx8ICd3ZWJraXRTcGVlY2hSZWNvZ25pdGlvbicgaW4gd2luZG93KSB7XHJcbiAgICAgICAgbGV0IHNwZWVjaCA9IGZhbHNlO1xyXG4gICAgICAgIHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbiA9IHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbiB8fCB3aW5kb3cud2Via2l0U3BlZWNoUmVjb2duaXRpb247XHJcbiAgICBcclxuICAgICAgICBsZXQgc3BlZWNoT2JqZWN0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uKCk7XHJcbiAgICAgICAgc3BlZWNoT2JqZWN0LmludGVyaW1SZXN1bHRzID0gdHJ1ZTtcclxuICAgICAgICBzcGVlY2hPYmplY3QubGFuZyA9ICdlbic7XHJcblxyXG4gICAgICAgIGxldCBwdXNoTGFuZ3VhZ2VTcGVlY2ggPSAoKSA9PiB7IFxyXG4gICAgICAgICAgICBsYW5ndWFnZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChsYW5ndWFnZUVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWNoT2JqZWN0LmxhbmcgPSAncnUnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlY2hPYmplY3QubGFuZyA9ICdlbic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1c2hMYW5ndWFnZVNwZWVjaCgpXHJcblxyXG4gICAgICAgIGNvbnN0IHB1c2hTcGVlY2ggPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNwZWVjaE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwicmVzdWx0XCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gQXJyYXkuZnJvbShlLnJlc3VsdHMpXHJcbiAgICAgICAgICAgICAgICAubWFwKHJlc3VsdCA9PiByZXN1bHRbMF0pXHJcbiAgICAgICAgICAgICAgICAubWFwKHJlc3VsdCA9PiByZXN1bHQudHJhbnNjcmlwdClcclxuICAgICAgICAgICAgICAgIC5qb2luKCcnKTtcclxuICAgICAgICAgICAgICAgIHNwZWVjaEhlbHBlci5pbm5lckhUTUwgPSBgJHt0ZXh0fSwg0Y/Qt9GL0Log0YDQsNGB0L/QvtC30L3QsNCy0LDQvdC40Y86ICR7c3BlZWNoT2JqZWN0Lmxhbmd9YDtcclxuICAgICAgICAgICAgICAgIGlmIChlLnJlc3VsdHNbMF0uaXNGaW5hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFB1dC52YWx1ZSArPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFB1dC52YWx1ZSArPSAnXFxuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNwZWVjaE9iamVjdC5hZGRFdmVudExpc3RlbmVyKFwiZW5kXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzcGVlY2ggPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlY2hPYmplY3Quc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHNwZWVjaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzcGVlY2ggPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlY2hPYmplY3Quc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlY2hCdG4uY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX2tleS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwZWVjaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWNoQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2tleWJvYXJkX19rZXktLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVjaE9iamVjdC5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdXNoU3BlZWNoKClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3BlZWNoSGVscGVyLmlubmVySFRNTCA9ICfQkdGA0LDRg9C30LXRgCDQvdC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgiDRhNGD0L3QutGG0LjRjiDRgNCw0YHQv9C+0LfQvdCw0LLQsNC90LjRjyDRgNC10YfQuCc7XHJcbiAgICB9XHJcbn1cclxuc3BlZWNoRnVuY3Rpb24oKVxyXG5cclxubGV0IGxldHRlckNoYW5nZSA9IChsYW5ndWFnZUVuLCBjYXBzTG9jaywgc2hpZnQpID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGV0dGVyQnRucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChsYW5ndWFnZUVuID09PSB0cnVlICYmIGNhcHNMb2NrID09PSBmYWxzZSAmJiBzaGlmdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgbGV0dGVyQnRuc1tpXS50ZXh0Q29udGVudCA9IGVuZ2xpc2hMZXR0ZXJzW2ldO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VFbiA9PT0gdHJ1ZSAmJiBjYXBzTG9jayA9PT0gZmFsc2UgJiYgc2hpZnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgbGV0dGVyQnRuc1tpXS50ZXh0Q29udGVudCA9IGVuZ2xpc2hMZXR0ZXJzU2hpZnRbaV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChsYW5ndWFnZUVuID09PSB0cnVlICYmIGNhcHNMb2NrID09PSB0cnVlICYmIHNoaWZ0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGxldHRlckJ0bnNbaV0udGV4dENvbnRlbnQgPSBlbmdsaXNoTGV0dGVyc1NoaWZ0Q2Fwc2xvY2tbaV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChsYW5ndWFnZUVuID09PSB0cnVlICYmIGNhcHNMb2NrID09PSB0cnVlICYmIHNoaWZ0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBsZXR0ZXJCdG5zW2ldLnRleHRDb250ZW50ID0gZW5nbGlzaExldHRlcnNDYXBzbG9ja1tpXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlRW4gPT09IGZhbHNlICYmIGNhcHNMb2NrID09PSBmYWxzZSAmJiBzaGlmdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgbGV0dGVyQnRuc1tpXS50ZXh0Q29udGVudCA9IHJ1c3NpYW5MZXR0ZXJzW2ldO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VFbiA9PT0gZmFsc2UgJiYgY2Fwc0xvY2sgPT09IGZhbHNlICYmIHNoaWZ0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGxldHRlckJ0bnNbaV0udGV4dENvbnRlbnQgPSBydXNzaWFuTGV0dGVyc1NoaWZ0W2ldO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGFuZ3VhZ2VFbiA9PT0gZmFsc2UgJiYgY2Fwc0xvY2sgPT09IHRydWUgJiYgc2hpZnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgbGV0dGVyQnRuc1tpXS50ZXh0Q29udGVudCA9IHJ1c3NpYW5MZXR0ZXJzU2hpZnRDYXBzbG9ja1tpXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhbmd1YWdlRW4gPT09IGZhbHNlICYmIGNhcHNMb2NrID09PSB0cnVlICYmIHNoaWZ0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBsZXR0ZXJCdG5zW2ldLnRleHRDb250ZW50ID0gcnVzc2lhbkxldHRlcnNDYXBzbG9ja1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBwdXNoTGFuZ3VhZ2UgPSAoKSA9PiB7IFxyXG4gICAgbGFuZ3VhZ2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlRW4pIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VFbiA9IGZhbHNlXHJcbiAgICAgICAgICAgIGxldHRlckNoYW5nZShsYW5ndWFnZUVuLCBjYXBzTG9jaywgc2hpZnQpO1xyXG4gICAgICAgICAgICBsYW5ndWFnZUJ0bi50ZXh0Q29udGVudCA9ICdSVSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2VFbiA9IHRydWUgXHJcbiAgICAgICAgICAgIGxldHRlckNoYW5nZShsYW5ndWFnZUVuLCBjYXBzTG9jaywgc2hpZnQpO1xyXG4gICAgICAgICAgICBsYW5ndWFnZUJ0bi50ZXh0Q29udGVudCA9ICdFTic7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxubGV0IHB1c2hDYXBzbG9jayA9ICgpID0+IHtcclxuICAgIGNhcHNsb2NrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChjYXBzTG9jayA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjYXBzTG9jayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXR0ZXJDaGFuZ2UobGFuZ3VhZ2VFbiwgY2Fwc0xvY2ssIHNoaWZ0KTtcclxuICAgICAgICAgICAgY2Fwc2xvY2tCdG4uY2xhc3NMaXN0LnJlbW92ZSgna2V5Ym9hcmRfX2tleS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2Fwc0xvY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICBsZXR0ZXJDaGFuZ2UobGFuZ3VhZ2VFbiwgY2Fwc0xvY2ssIHNoaWZ0KTtcclxuICAgICAgICAgICAgY2Fwc2xvY2tCdG4uY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX2tleS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxubGV0IHB1c2hTaGlmdCA9ICgpID0+IHtcclxuICAgIHNoaWZ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChzaGlmdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBzaGlmdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXR0ZXJDaGFuZ2UobGFuZ3VhZ2VFbiwgY2Fwc0xvY2ssIHNoaWZ0KTtcclxuICAgICAgICAgICAgc2hpZnRCdG4uY2xhc3NMaXN0LnJlbW92ZSgna2V5Ym9hcmRfX2tleS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2hpZnQgPSB0cnVlO1xyXG4gICAgICAgICAgICBsZXR0ZXJDaGFuZ2UobGFuZ3VhZ2VFbiwgY2Fwc0xvY2ssIHNoaWZ0KTtcclxuICAgICAgICAgICAgc2hpZnRCdG4uY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmRfX2tleS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxubGV0IHB1c2hMZXR0ZXIgPSAoKSA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxldHRlckJ0bnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXR0ZXJCdG5zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvdXRQdXQudmFsdWUgKz0gbGV0dGVyQnRuc1tpXS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgb3V0UHV0LmZvY3VzKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxubGV0IHB1c2hCYWNrc3BhY2UgPSAoKSA9PiB7XHJcbiAgICBiYWNrc3BhY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgb3V0UHV0LnZhbHVlID0gb3V0UHV0LnZhbHVlLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICBvdXRQdXQuZm9jdXMoKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmxldCBwdXNoRW50ZXIgPSAoKSA9PiB7XHJcbiAgICBlbnRlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBvdXRQdXQudmFsdWUgKz0gJ1xcbic7XHJcbiAgICAgICAgb3V0UHV0LmZvY3VzKCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5sZXQgcHVzaFNwYWNlID0gKCkgPT4geyBcclxuICAgIHNwYWNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIG91dFB1dC52YWx1ZSArPSAnICc7XHJcbiAgICAgICAgb3V0UHV0LmZvY3VzKCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5sZXQga2V5Qm9hcmRJbml0ID0gKCkgPT4geyBcclxuICAgIG91dFB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBrZXlCb2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdrZXlib2FyZC0taGlkZGVuJyk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5sZXQga2V5Ym9hcmRIaWRkZW5GdW5jdGlvbiA9ICgpID0+IHsgXHJcbiAgICBkb25lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGtleUJvYXJkLmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkLS1oaWRkZW4nKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbnB1c2hMYW5ndWFnZSgpO1xyXG5wdXNoQ2Fwc2xvY2soKTtcclxucHVzaFNoaWZ0KCk7XHJcbnB1c2hMZXR0ZXIoKTtcclxucHVzaEJhY2tzcGFjZSgpO1xyXG5wdXNoRW50ZXIoKTtcclxucHVzaFNwYWNlKCk7XHJcbmtleUJvYXJkSW5pdCgpO1xyXG5rZXlib2FyZEhpZGRlbkZ1bmN0aW9uKCk7XHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGxldHRlckJ0bnMubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldHRlckJ0bnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBwbGF5U291bmQoJy4vc3RhdGljL3NvdW5kL2EubXAzJyk7XHJcbiAgICB9KVxyXG59XHJcbmxhbmd1YWdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwbGF5U291bmQoJy4vc3RhdGljL3NvdW5kL2EubXAzJyk7XHJcbn0pO1xyXG5iYWNrc3BhY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBsYXlTb3VuZCgnLi9zdGF0aWMvc291bmQvYmFja3NwYWNlLm1wMycpO1xyXG59KTtcclxuc3BlZWNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwbGF5U291bmQoJy4vc3RhdGljL3NvdW5kL2EubXAzJyk7XHJcbn0pO1xyXG5hdWRpb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcGxheVNvdW5kKCcuL3N0YXRpYy9zb3VuZC9hLm1wMycpO1xyXG59KTtcclxuY2Fwc2xvY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBsYXlTb3VuZCgnLi9zdGF0aWMvc291bmQvY2Fwcy5tcDMnKTtcclxufSk7XHJcbmVudGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwbGF5U291bmQoJy4vc3RhdGljL3NvdW5kL2VudGVyLm1wMycpO1xyXG59KTtcclxuc2hpZnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBsYXlTb3VuZCgnLi9zdGF0aWMvc291bmQvc2hpZnQubXAzJyk7XHJcbn0pO1xyXG5kb25lQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwbGF5U291bmQoJy4vc3RhdGljL3NvdW5kL2EubXAzJyk7XHJcbn0pO1xyXG5zcGFjZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcGxheVNvdW5kKCcuL3N0YXRpYy9zb3VuZC9zcGFjZS5tcDMnKTtcclxufSk7XHJcbmxlZnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBsYXlTb3VuZCgnLi9zdGF0aWMvc291bmQvc3BhY2UubXAzJyk7XHJcbn0pO1xyXG5yaWdodEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcGxheVNvdW5kKCcuL3N0YXRpYy9zb3VuZC9zcGFjZS5tcDMnKTtcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=